<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Shamba Direct</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/payment.css?v=1.0">
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="page-container">
        <header class="app-header">
            <div class="logo">
                <img src="../assets/images/Shamba direct logo.png" alt="Shamba Direct Logo" loading="lazy">
            </div>
            <div class="page-title">
                <h1>Payment & Checkout</h1>
            </div>
            <div class="header-actions">
                <div class="language-toggle">
                    <span id="lang-en" class="active" data-lang="en">EN</span> | <span id="lang-sw" data-lang="sw">SW</span>
                </div>
            </div>
        </header>

        <div class="step-tracker">
            <div class="step active">1. Cart</div>
            <div class="step active current">2. Payment</div>
            <div class="step">3. Confirmation</div>
        </div>

        <div class="checkout-content">
            <div class="main-column">
                <div class="card product-summary-card">
                    <h2><i class="ri-shopping-cart-line"></i> Order Details</h2>
                    <!-- BACKEND: Render product/order details dynamically here -->
                    <div class="product-item">
                        <img src="../assets/images/3d-render-rotavator-removebg-preview.png" alt="Product Image" loading="lazy">
                        <div class="product-info">
                            <h3>Irrigation system (Rotavator)</h3>
                            <p>Price: TZS 115,000</p>
                            <p>Quantity: 2 bags</p>
                        </div>
                        <div class="product-total">
                            <p>TZS 230,000</p>
                        </div>
                    </div>
                    <div class="delivery-info">
                        <p><i class="ri-truck-line"></i> Estimated Delivery: <strong>2-3 Business Days</strong></p>
                    </div>
                    <button class="btn btn-secondary edit-order-btn"><i class="ri-edit-line"></i> Edit Order</button>
                </div>

                <div class="card customer-details-card">
                    <h2><i class="ri-user-line"></i> Customer & Delivery Details</h2>
                    <!-- BACKEND: Handle customer details and order submission here -->
                    <form id="customerDetailsForm" action="/api/checkout" method="POST">
                        <div class="form-group">
                            <label for="fullName">Full Name <span class="required">*</span></label>
                            <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required>
                            <div class="error-message" id="fullName-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phone" name="phone" placeholder="e.g., +2557XXXXXXXX" required>
                            <div class="error-message" id="phone-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="deliveryVillage">Delivery Village <span class="required">*</span></label>
                            <input type="text" id="deliveryVillage" name="deliveryVillage" placeholder="e.g., Kijitonyama" required>
                            <div class="error-message" id="deliveryVillage-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="deliveryWard">Delivery Ward <span class="required">*</span></label>
                            <input type="text" id="deliveryWard" name="deliveryWard" placeholder="e.g., Manzese" required>
                            <div class="error-message" id="deliveryWard-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="deliveryDistrict">Delivery District <span class="required">*</span></label>
                            <input type="text" id="deliveryDistrict" name="deliveryDistrict" placeholder="e.g., Kinondoni" required>
                            <div class="error-message" id="deliveryDistrict-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="alternateContact">Alternate Contact (Optional)</label>
                            <input type="tel" id="alternateContact" name="alternateContact" placeholder="e.g., +2556XXXXXXXX">
                        </div>
                    </form>
                </div>

                <div class="card payment-method-card">
                    <h2><i class="ri-secure-payment-line"></i> Select Payment Method</h2>
                    <!-- BACKEND: Render payment options dynamically here -->
                    <div class="payment-options">
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="mobileMoney" checked>
                            <div class="option-content">
                                <i class="ri-smartphone-line"></i> Mobile Money
                                <div class="mobile-money-icons">
                                    <img src="../assets/images/mpesa logo.png" alt="M-Pesa" loading="lazy">
                                    <img src="../assets/images/mix by yas logo.png" alt="Tigo Pesa" loading="lazy">
                                    <img src="../assets/images/halopesa.png" alt="Airtel Money" loading="lazy">
                                </div>
                            </div>
                        </label>

                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="cardPayment">
                            <div class="option-content">
                                <i class="ri-bank-card-line"></i> Card Payment
                                <div class="card-icons">
                                    <i class='bx bxl-visa' ></i>
                                    <i class='bx bxl-mastercard' ></i>
                                </div>
                            </div>
                        </label>

                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="cashOnDelivery">
                            <div class="option-content">
                                <i class="ri-money-dollar-circle-line"></i> Cash on Delivery
                            </div>
                        </label>

                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="creditFinance">
                            <div class="option-content">
                                <i class="ri-hand-coin-line"></i> Credit via Partner Finance
                            </div>
                        </label>
                    </div>

                    <div id="paymentDetailsArea" class="payment-details-area">
                        </div>
                </div>
            </div>

            <div class="sidebar-column">
                <!-- BACKEND: Render order summary dynamically here -->
                <div class="card order-summary-card sticky">
                    <h2><i class="ri-file-list-line"></i> Order Summary</h2>
                    <div class="summary-item">
                        <span>Product Total</span>
                        <span id="summaryProductTotal">TZS 30,000</span>
                    </div>
                    <!-- BACKEND: Calculate delivery fee dynamically here -->
                    <div class="summary-item">
                        <span>Delivery Fee</span>
                        <span id="summaryDeliveryFee">TZS 5,000</span>
                    </div>
                    <div class="summary-item total-item">
                        <span>Total Payable</span>
                        <span id="summaryTotalPayable">TZS 35,000</span>
                    </div>

                    <div class="promo-code">
                        <input type="text" id="promoCodeInput" placeholder="Enter promo code">
                        <button id="applyPromoBtn" class="btn btn-secondary">Apply</button>
                    </div>
                    <div class="error-message" id="promo-error"></div>

                    <button id="placeOrderBtn" class="btn btn-primary place-order-btn" disabled>
                        <span class="btn-text"><i class="ri-lock-line"></i> Place Order & Pay</span>
                        <span class="loading-spinner" style="display: none;"></span>
                    </button>
                </div>
            </div>
        </div>

        <!-- BACKEND: Render order confirmation dynamically here -->
        <div class="after-payment-screen" id="confirmationScreen">
            <div class="confirmation-content">
                <i class="ri-checkbox-circle-fill success-icon"></i>
                <h2>Order Placed Successfully!</h2>
                <p>Your order has been confirmed.</p>
                <p>Order Reference: <strong id="orderReference">#SHD123456789</strong></p>
                <div class="confirmation-actions">
                    <button class="btn btn-primary"><i class="ri-truck-line"></i> Track My Order</button>
                    <button class="btn btn-secondary"><i class="ri-dashboard-line"></i> Return to Dashboard</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/payment.js?v=1.0"></script>
</body>
</html>